"use strict";
var aobj1 = {
    BSSID: "",
    SSID: "",
    secure: false,
    signalStrength: 0
};
var auto = "自动";
var manual = "手动";
Page({
    data: {
        device: {},
        type: "wifi",
        wifi: aobj1,
        password: "",
        modes: [
            auto,
            manual
        ],
        ip: {
            mode: auto,
            address: "",
            mask: "",
            gateway: "",
        },
        dns: {
            mode: auto,
            values: []
        }
    },
    onLoad: function () {
        this.startWiFi();
    },
    onReady: function () {
    },
    onShow: function () {
    },
    onHide: function () {
    },
    onUnload: function () {
        this.stopWiFi();
    },
    onPullDownRefresh: function () {
    },
    onReachBottom: function () {
    },
    onShareAppMessage: function (opts) {
        console.log(opts.target);
        return {};
    },
    onTapSSID: function () {
        var _this = this;
        var option1 = {
            success: function (res) {
                console.log("\u83B7\u53D6\u7CFB\u7EDF\u4FE1\u606F\u6210\u529F\uFF1A" + JSON.stringify(res));
                if (res.platform === "ios") {
                    var option2 = {
                        title: "提示",
                        content: "由于系统限制，iOS 用户请手动进入系统 WiFi 页面，当列表中出现目标 WiFi 时再返回小程序。",
                        showCancel: false,
                        success: function (res) {
                            console.log("提示框弹出成功");
                            if (res.confirm) {
                                _this.navigateToWiFi();
                            }
                        },
                        fail: function (res) { return console.log("\u63D0\u793A\u7A97\u5F39\u51FA\u5931\u8D25\uFF1A" + res.errMsg); }
                    };
                    wx.showModal(option2);
                }
                else {
                    _this.navigateToWiFi();
                }
            },
            fail: function (res) { return console.log("\u83B7\u53D6\u7CFB\u7EDF\u4FE1\u606F\u5931\u8D25\uFF1A" + res.errMsg); }
        };
        wx.getSystemInfo(option1);
    },
    onIPModeChange: function (e) {
        var number = e.detail.value;
        var mode = this.data.modes[number];
        var data = {};
        data["ip.mode"] = mode;
        this.setData(data);
    },
    onDNSModeChange: function (e) {
        var number = e.detail.value;
        var mode = this.data.modes[number];
        var data = {};
        data["dns.mode"] = mode;
        this.setData(data);
    },
    startWiFi: function () {
        var _this = this;
        var option = {
            success: function () {
                console.log("打开 WiFi 模块成功");
                _this.getConnectedWiFi();
            },
            fail: function (res) { return console.log("\u6253\u5F00 WiFi \u6A21\u5757\u5931\u8D25\uFF1A" + res.errCode + " - " + res.errMsg); }
        };
        wx.startWifi(option);
    },
    stopWiFi: function () {
        var option = {
            success: function () { return console.log("关闭 WiFi 模块成功"); },
            fail: function (res) { return console.log("\u5173\u95ED WiFi \u6A21\u5757\u5931\u8D25\uFF1A" + res.errCode + " - " + res.errMsg); }
        };
        wx.stopWifi(option);
    },
    getConnectedWiFi: function () {
        var _this = this;
        var option = {
            success: function (res) {
                var wifi = res.wifi;
                console.log("\u83B7\u53D6\u5DF2\u8FDE\u63A5 WiFi \u6210\u529F: " + JSON.stringify(wifi));
                _this.changeWiFi(wifi);
            },
            fail: function (res) { return console.log("\u83B7\u53D6\u5DF2\u8FDE\u63A5 WiFi \u5931\u8D25: " + res.errCode + " - " + res.errMsg); }
        };
        wx.getConnectedWifi(option);
    },
    navigateToWiFi: function () {
        var _this = this;
        var wifi = this.data.wifi;
        var option = {
            url: "../wifi/wifi",
            success: function (res) {
                console.log("跳转 WiFi 页面成功");
                var channel = res.eventChannel;
                channel.emit("wifi", wifi);
                channel.on("wifi", function (wifi) { return _this.changeWiFi(wifi); });
            },
            fail: function (res) { return console.log("\u8DF3\u8F6C WiFi \u9875\u9762\u5931\u8D25\uFF1A" + res.errMsg); }
        };
        wx.navigateTo(option);
    },
    changeWiFi: function (wifi) {
        var data = { wifi: wifi };
        this.setData(data);
    },
    onSubmit: function () {
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWRhcHRlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImFkYXB0ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQU0sS0FBSyxHQUErQjtJQUN4QyxLQUFLLEVBQUUsRUFBRTtJQUNULElBQUksRUFBRSxFQUFFO0lBQ1IsTUFBTSxFQUFFLEtBQUs7SUFDYixjQUFjLEVBQUUsQ0FBQztDQUNsQixDQUFDO0FBRUYsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDO0FBQ2xCLElBQU0sTUFBTSxHQUFHLElBQUksQ0FBQztBQUVwQixJQUFJLENBQUM7SUFLSCxJQUFJLEVBQUU7UUFDSixNQUFNLEVBQUUsRUFBRTtRQUNWLElBQUksRUFBRSxNQUFNO1FBQ1osSUFBSSxFQUFFLEtBQUs7UUFDWCxRQUFRLEVBQUUsRUFBRTtRQUNaLEtBQUssRUFBRTtZQUNMLElBQUk7WUFDSixNQUFNO1NBQ1A7UUFDRCxFQUFFLEVBQUU7WUFDRixJQUFJLEVBQUUsSUFBSTtZQUNWLE9BQU8sRUFBRSxFQUFFO1lBQ1gsSUFBSSxFQUFFLEVBQUU7WUFDUixPQUFPLEVBQUUsRUFBRTtTQUNaO1FBQ0QsR0FBRyxFQUFFO1lBQ0gsSUFBSSxFQUFFLElBQUk7WUFDVixNQUFNLEVBQUUsRUFBRTtTQUNYO0tBQ0Y7SUFLRCxNQUFNO1FBRUosSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQ25CLENBQUM7SUFLRCxPQUFPO0lBRVAsQ0FBQztJQUtELE1BQU07SUFFTixDQUFDO0lBS0QsTUFBTTtJQUVOLENBQUM7SUFLRCxRQUFRO1FBRU4sSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQ2xCLENBQUM7SUFLRCxpQkFBaUI7SUFFakIsQ0FBQztJQUtELGFBQWE7SUFFYixDQUFDO0lBS0QsaUJBQWlCLEVBQWpCLFVBQWtCLElBQUk7UUFDcEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUE7UUFDeEIsT0FBTyxFQUFFLENBQUE7SUFDWCxD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cUIsQ0FBQyxDQUFDO1lBQ3BELENBQUM7WUFDRCxJQUFJLEVBQUUsVUFBQSxHQUFHLElBQUksT0FBQSxPQUFPLENBQUMsR0FBRyxDQUFDLHFEQUFnQixHQUFHLENBQUMsTUFBUSxDQUFDLEVBQXpDLENBQXlDO1NBQ3ZELENBQUM7UUFDRixFQUFFLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3hCLENBQUM7SUFFRCxVQUFVLFlBQUMsSUFBZ0M7UUFDekMsSUFBTSxJQUFJLEdBQUcsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUM7UUFDNUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNyQixDQUFDO0lBRUQsUUFBUTtJQXNCUixDQUFDO0NBQ0YsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYW9iajE6IFdlY2hhdE1pbmlwcm9ncmFtLldpZmlJbmZvID0ge1xyXG4gIEJTU0lEOiBcIlwiLFxyXG4gIFNTSUQ6IFwiXCIsXHJcbiAgc2VjdXJlOiBmYWxzZSxcclxuICBzaWduYWxTdHJlbmd0aDogMFxyXG59O1xyXG5cclxuY29uc3QgYXV0byA9IFwi6Ieq5YqoXCI7XHJcbmNvbnN0IG1hbnVhbCA9IFwi5omL5YqoXCI7XHJcblxyXG5QYWdlKHtcclxuXHJcbiAgLyoqXHJcbiAgICog6aG16Z2i55qE5Yid5aeL5pWw5o2uXHJcbiAgICovXHJcbiAgZGF0YToge1xyXG4gICAgZGV2aWNlOiB7fSxcclxuICAgIHR5cGU6IFwid2lmaVwiLFxyXG4gICAgd2lmaTogYW9iajEsXHJcbiAgICBwYXNzd29yZDogXCJcIixcclxuICAgIG1vZGVzOiBbXHJcbiAgICAgIGF1dG8sXHJcbiAgICAgIG1hbnVhbFxyXG4gICAgXSxcclxuICAgIGlwOiB7XHJcbiAgICAgIG1vZGU6IGF1dG8sXHJcbiAgICAgIGFkZHJlc3M6IFwiXCIsXHJcbiAgICAgIG1hc2s6IFwiXCIsXHJcbiAgICAgIGdhdGV3YXk6IFwiXCIsXHJcbiAgICB9LFxyXG4gICAgZG5zOiB7XHJcbiAgICAgIG1vZGU6IGF1dG8sXHJcbiAgICAgIHZhbHVlczogW11cclxuICAgIH1cclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdouWKoOi9vVxyXG4gICAqL1xyXG4gIG9uTG9hZCgpIHtcclxuICAgIC8vIOaJk+W8gCBXaUZpIOaooeWdl1xyXG4gICAgdGhpcy5zdGFydFdpRmkoKTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdouWIneasoea4suafk+WujOaIkFxyXG4gICAqL1xyXG4gIG9uUmVhZHkoKSB7XHJcblxyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIOeUn+WRveWRqOacn+WHveaVsC0t55uR5ZCs6aG16Z2i5pi+56S6XHJcbiAgICovXHJcbiAgb25TaG93KCkge1xyXG5cclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdoumakOiXj1xyXG4gICAqL1xyXG4gIG9uSGlkZSgpIHtcclxuXHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICog55Sf5ZG95ZGo5pyf5Ye95pWwLS3nm5HlkKzpobXpnaLljbjovb1cclxuICAgKi9cclxuICBvblVubG9hZCgpIHtcclxuICAgIC8vIOWFs+mXrSBXaUZpIOaooeWdl1xyXG4gICAgdGhpcy5zdG9wV2lGaSgpO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIOmhtemdouebuOWFs+S6i+S7tuWkhOeQhuWHveaVsC0t55uR5ZCs55So5oi35LiL5ouJ5Yqo5L2cXHJcbiAgICovXHJcbiAgb25QdWxsRG93blJlZnJlc2goKSB7XHJcblxyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIOmhtemdouS4iuaLieinpuW6leS6i+S7tueahOWkhOeQhuWHveaVsFxyXG4gICAqL1xyXG4gIG9uUmVhY2hCb3R0b20oKSB7XHJcblxyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIOeUqOaIt+eCueWHu+WPs+S4iuinkuWIhuS6q1xyXG4gICAqL1xyXG4gIG9uU2hhcmVBcHBNZXNzYWdlKG9wdHMpOiBXZWNoYXRNaW5pcHJvZ3JhbS5QYWdlLklDdXN0b21TaGFyZUNvbnRlbnQge1xyXG4gICAgY29uc29sZS5sb2cob3B0cy50YXJnZXQpXHJcbiAgICByZXR1cm4ge31cclxuICB9LFxyXG5cclxuICBvblRhcFNTSUQoKSB7XHJcbiAgICBjb25zdCBvcHRpb24xOiBXZWNoYXRNaW5pcHJvZ3JhbS5HZXRTeXN0ZW1JbmZvT3B0aW9uID0ge1xyXG4gICAgICBzdWNjZXNzOiByZXMgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGDojrflj5bns7vnu5/kv6Hmga/miJDlip/vvJoke0pTT04uc3RyaW5naWZ5KHJlcyl9YCk7XHJcblxyXG4gICAgICAgIC8vIGlPUyDpnIDopoHmj5DnpLrnlKjmiLfot7Povazns7vnu5/orr7nva7nlYzpnaJcclxuICAgICAgICBpZiAocmVzLnBsYXRmb3JtID09PSBcImlvc1wiKSB7XHJcbiAgICAgICAgICBjb25zdCBvcHRpb24yOiBXZWNoYXRNaW5pcHJvZ3JhbS5TaG93TW9kYWxPcHRpb24gPSB7XHJcbiAgICAgICAgICAgIHRpdGxlOiBcIuaPkOekulwiLFxyXG4gICAgICAgICAgICBjb250ZW50OiBcIueUseS6juezu+e7n+mZkOWItu+8jGlPUyDnlKjmiLfor7fmiYvliqjov5vlhaXns7vnu58gV2lGaSDpobXpnaLvvIzlvZPliJfooajkuK3lh7rnjrDnm67moIcgV2lGaSDml7blho3ov5Tlm57lsI/nqIvluo/jgIJcIixcclxuICAgICAgICAgICAgc2hvd0NhbmNlbDogZmFsc2UsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLmj5DnpLrmoYblvLnlh7rmiJDlip9cIik7XHJcblxyXG4gICAgICAgICAgICAgIGlmIChyZXMuY29uZmlybSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZVRvV2lGaSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZmFpbDogcmVzID0+IGNvbnNvbGUubG9nKGDmj5DnpLrnqpflvLnlh7rlpLHotKXvvJoke3Jlcy5lcnJNc2d9YClcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICB3eC5zaG93TW9kYWwob3B0aW9uMik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMubmF2aWdhdGVUb1dpRmkoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGZhaWw6IHJlcyA9PiBjb25zb2xlLmxvZyhg6I635Y+W57O757uf5L+h5oGv5aSx6LSl77yaJHtyZXMuZXJyTXNnfWApXHJcbiAgICB9O1xyXG4gICAgd3guZ2V0U3lzdGVtSW5mbyhvcHRpb24xKTtcclxuICAgIC8vdGhpcy5nZXRXaUZpTGlzdCgpO1xyXG4gIH0sXHJcblxyXG4gIG9uSVBNb2RlQ2hhbmdlKGU6IFJlY29yZDxzdHJpbmcsIGFueT4pIHtcclxuICAgIGNvbnN0IG51bWJlciA9IGUuZGV0YWlsLnZhbHVlO1xyXG4gICAgY29uc3QgbW9kZSA9IHRoaXMuZGF0YS5tb2Rlc1tudW1iZXJdO1xyXG4gICAgY29uc3QgZGF0YTogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xyXG4gICAgZGF0YVtcImlwLm1vZGVcIl0gPSBtb2RlO1xyXG4gICAgdGhpcy5zZXREYXRhKGRhdGEpO1xyXG4gIH0sXHJcblxyXG4gIG9uRE5TTW9kZUNoYW5nZShlOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSB7XHJcbiAgICBjb25zdCBudW1iZXIgPSBlLmRldGFpbC52YWx1ZTtcclxuICAgIGNvbnN0IG1vZGUgPSB0aGlzLmRhdGEubW9kZXNbbnVtYmVyXTtcclxuICAgIGNvbnN0IGRhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcclxuICAgIGRhdGFbXCJkbnMubW9kZVwiXSA9IG1vZGU7XHJcbiAgICB0aGlzLnNldERhdGEoZGF0YSk7XHJcbiAgfSxcclxuXHJcbiAgc3RhcnRXaUZpKCkge1xyXG4gICAgY29uc3Qgb3B0aW9uOiBXZWNoYXRNaW5pcHJvZ3JhbS5TdGFydFdpZmlPcHRpb24gPSB7XHJcbiAgICAgIHN1Y2Nlc3M6ICgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIuaJk+W8gCBXaUZpIOaooeWdl+aIkOWKn1wiKTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRDb25uZWN0ZWRXaUZpKCk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGZhaWw6IHJlcyA9PiBjb25zb2xlLmxvZyhg5omT5byAIFdpRmkg5qih5Z2X5aSx6LSl77yaJHtyZXMuZXJyQ29kZX0gLSAke3Jlcy5lcnJNc2d9YClcclxuICAgIH07XHJcbiAgICB3eC5zdGFydFdpZmkob3B0aW9uKTtcclxuICB9LFxyXG5cclxuICBzdG9wV2lGaSgpIHtcclxuICAgIGNvbnN0IG9wdGlvbjogV2VjaGF0TWluaXByb2dyYW0uU3RvcFdpZmlPcHRpb24gPSB7XHJcbiAgICAgIHN1Y2Nlc3M6ICgpID0+IGNvbnNvbGUubG9nKFwi5YWz6ZetIFdpRmkg5qih5Z2X5oiQ5YqfXCIpLFxyXG4gICAgICBmYWlsOiByZXMgPT4gY29uc29sZS5sb2coYOWFs+mXrSBXaUZpIOaooeWdl+Wksei0pe+8miR7cmVzLmVyckNvZGV9IC0gJHtyZXMuZXJyTXNnfWApXHJcbiAgICB9O1xyXG4gICAgd3guc3RvcFdpZmkob3B0aW9uKTtcclxuICB9LFxyXG5cclxuICBnZXRDb25uZWN0ZWRXaUZpKCkge1xyXG4gICAgY29uc3Qgb3B0aW9uOiBXZWNoYXRNaW5pcHJvZ3JhbS5HZXRDb25uZWN0ZWRXaWZpT3B0aW9uID0ge1xyXG4gICAgICBzdWNjZXNzOiByZXMgPT4ge1xyXG4gICAgICAgIGNvbnN0IHdpZmkgPSByZXMud2lmaTtcclxuICAgICAgICBjb25zb2xlLmxvZyhg6I635Y+W5bey6L+e5o6lIFdpRmkg5oiQ5YqfOiAke0pTT04uc3RyaW5naWZ5KHdpZmkpfWApO1xyXG5cclxuICAgICAgICB0aGlzLmNoYW5nZVdpRmkod2lmaSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGZhaWw6IHJlcyA9PiBjb25zb2xlLmxvZyhg6I635Y+W5bey6L+e5o6lIFdpRmkg5aSx6LSlOiAke3Jlcy5lcnJDb2RlfSAtICR7cmVzLmVyck1zZ31gKVxyXG4gICAgfTtcclxuICAgIHd4LmdldENvbm5lY3RlZFdpZmkob3B0aW9uKTtcclxuICB9LFxyXG5cclxuICBuYXZpZ2F0ZVRvV2lGaSgpIHtcclxuICAgIGNvbnN0IHdpZmkgPSB0aGlzLmRhdGEud2lmaTtcclxuICAgIGNvbnN0IG9wdGlvbjogV2VjaGF0TWluaXByb2dyYW0uTmF2aWdhdGVUb09wdGlvbiA9IHtcclxuICAgICAgdXJsOiBcIi4uL3dpZmkvd2lmaVwiLFxyXG4gICAgICBzdWNjZXNzOiByZXMgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwi6Lez6L2sIFdpRmkg6aG16Z2i5oiQ5YqfXCIpO1xyXG5cclxuICAgICAgICBjb25zdCBjaGFubmVsID0gcmVzLmV2ZW50Q2hhbm5lbDtcclxuICAgICAgICBjaGFubmVsLmVtaXQoXCJ3aWZpXCIsIHdpZmkpO1xyXG4gICAgICAgIGNoYW5uZWwub24oXCJ3aWZpXCIsIHdpZmkgPT4gdGhpcy5jaGFuZ2VXaUZpKHdpZmkpKTtcclxuICAgICAgfSxcclxuICAgICAgZmFpbDogcmVzID0+IGNvbnNvbGUubG9nKGDot7PovawgV2lGaSDpobXpnaLlpLHotKXvvJoke3Jlcy5lcnJNc2d9YClcclxuICAgIH07XHJcbiAgICB3eC5uYXZpZ2F0ZVRvKG9wdGlvbik7XHJcbiAgfSxcclxuXHJcbiAgY2hhbmdlV2lGaSh3aWZpOiBXZWNoYXRNaW5pcHJvZ3JhbS5XaWZpSW5mbykge1xyXG4gICAgY29uc3QgZGF0YSA9IHsgd2lmaTogd2lmaSB9O1xyXG4gICAgdGhpcy5zZXREYXRhKGRhdGEpO1xyXG4gIH0sXHJcblxyXG4gIG9uU3VibWl0KCkge1xyXG4gICAgLy8gY29uc3QgbW9kZSA9IFwiXCI7XHJcbiAgICAvLyBjb25zdCBhZGRyZXNzID0gdGhpcy5kYXRhLmFkZHJlc3M7XHJcbiAgICAvLyBjb25zdCBtYXNrID0gdGhpcy5kYXRhLm1hc2s7XHJcbiAgICAvLyBjb25zdCBnYXRld2F5ID0gdGhpcy5kYXRhLmlwLmdhdGV3YXk7XHJcbiAgICAvLyBjb25zdCBkbnMgPSB0aGlzLmRhdGEuZG5zLnZhbHVlcztcclxuICAgIC8vIHN3aXRjaCAobW9kZSkge1xyXG4gICAgLy8gICBjYXNlIGV0aGVybmV0OiB7XHJcbiAgICAvLyAgICAgdGhpcy5tb2RpZnkoXCJldGhlcm5ldFwiLCBhZGRyZXNzLCBtYXNrLCBnYXRld2F5LCBkbnMpO1xyXG4gICAgLy8gICAgIGJyZWFrO1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyAgIGNhc2Ugd2lmaToge1xyXG4gICAgLy8gICAgIGNvbnN0IHNzaWQgPSB0aGlzLmRhdGEuc3NpZDtcclxuICAgIC8vICAgICBjb25zdCBwYXNzd29yZCA9IHRoaXMuZGF0YS5wYXNzd29yZDtcclxuICAgIC8vICAgICB0aGlzLm1vZGlmeShcIndpZmlcIiwgYWRkcmVzcywgbWFzaywgZ2F0ZXdheSwgZG5zLCBzc2lkLCBwYXNzd29yZCk7XHJcbiAgICAvLyAgICAgYnJlYWs7XHJcbiAgICAvLyAgIH1cclxuICAgIC8vICAgZGVmYXVsdDoge1xyXG4gICAgLy8gICAgIGNvbnNvbGUubG9nKGDov57mjqXmqKHlvI/plJnor6/vvJoke21vZGV9YCk7XHJcbiAgICAvLyAgICAgYnJlYWs7XHJcbiAgICAvLyAgIH1cclxuICAgIC8vIH1cclxuICB9XHJcbn0pIl19